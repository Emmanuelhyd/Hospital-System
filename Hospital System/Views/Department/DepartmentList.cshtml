@model Hospital_System.Dash.DashboardDetails

@{
    ViewBag.Title = "Department List";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<script>
    function CreateNew() {
        window.location.href = 'AddDepartment';
    }
</script>

<div class="container mt-5">
    <h2 class="text-center">Department List</h2>
    <div class="d-flex justify-content-between mb-4">
        <div>
            <button class="btn btn-primary mr-2" onclick="CreateNew()">
                <i class="fas fa-plus"></i> Create New
            </button>
            <input type="search" id="dep" name="dep" placeholder="Search Department" class="form-control d-inline-block w-25" style="position: absolute; margin-left: 30%;">
            <button type="submit" class="btn btn-secondary" style="margin-left: 170%; color: white; background: blue;   ">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
    </div>

    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Department Name</th>
                <th>Doctor Name</th>
                <th>Education</th>
                <th>Description</th>
                <th>Gender</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.mDepartments)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.Id)</td>
                    <td>@Html.DisplayFor(modelItem => item.DepartmentName)</td>
                    <td>@Html.DisplayFor(modelItem => item.DoctorName)</td>
                    <td>@Html.DisplayFor(modelItem => item.Education)</td>
                    <td>@Html.DisplayFor(modelItem => item.Description)</td>
                    <td>@Html.DisplayFor(modelItem => item.Gender)</td>
                    <td>@Html.DisplayFor(modelItem => item.Status)</td>
                    <td>
                        <a href="@Url.Action("DLEdit", new { Id = item.Id })" class="text-primary" title="Edit">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="javascript:void(0);" onclick="confirmDelete('@Url.Action("DLDelete", new {Id = item.Id })')" class="text-danger ml-2" title="Delete">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>

<script>
    function confirmDelete(deleteUrl) {
        swal({
            title: "Are you sure?",
            text: "You will not be able to recover this record!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        url: deleteUrl,
                        type: 'POST',
                        success: function (result) {
                            swal("Deleted!", "Your record has been deleted.", "success");
                            location.reload();
                        },
                        error: function (err) {
                            swal("Error!", "There was a problem deleting the record.", "error");
                        }
                    });
                }
            });
    }
</script>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
    }

    h2 {
        color: #333;
    }

    .btn {
        display: flex;
        align-items: center;
    }

        .btn i {
            margin-right: 5px; /* Space between icon and text */
        }

    .table {
        background-color: white;
        border-radius: 8px;
        overflow: hidden; /* Rounded corners */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    tr:hover {
        background-color: #f5f5f5;
    }
</style>
